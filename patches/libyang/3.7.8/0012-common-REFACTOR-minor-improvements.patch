From 9ca35a911ee917e5c9d6de2d45d089be38a8df91 Mon Sep 17 00:00:00 2001
From: Michal Vasko <mvasko@cesnet.cz>
Date: Tue, 28 Jan 2025 10:45:28 +0100
Subject: [PATCH 12/27] common REFACTOR minor improvements
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Organization: Wires

Signed-off-by: Mattias Walstr√∂m <lazzer@gmail.com>
---
 src/ly_common.h | 2 +-
 src/path.c      | 4 +++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/ly_common.h b/src/ly_common.h
index 51aba57bb..75101d560 100644
--- a/src/ly_common.h
+++ b/src/ly_common.h
@@ -154,7 +154,7 @@ const struct lyd_node *ly_log_location_dnode(uint32_t idx);
 uint32_t ly_log_location_dnode_count(void);
 
 /**
- * @brief Update location schema/data nodes for logger, not provided arguments (NULLs) are kept (does not override).
+ * @brief Update location schema/data nodes for logger. If both NULL, root data node is added.
  *
  * @param[in] SCNODE Compiled schema node.
  * @param[in] DNODE Data node.
diff --git a/src/path.c b/src/path.c
index f173b177b..78c13b270 100644
--- a/src/path.c
+++ b/src/path.c
@@ -499,7 +499,7 @@ error:
  * @brief Parse NameTest and get the corresponding schema node.
  *
  * @param[in] ctx libyang context.
- * @param[in] cur_node Optional current (original context) node.
+ * @param[in] cur_node Current (original context) node.
  * @param[in] cur_mod Current module of the path (where the path is "instantiated"). Needed for ::LY_VALUE_SCHEMA
  * and ::LY_VALUE_SCHEMA_RESOLVED.
  * @param[in] prev_ctx_node Previous context node.
@@ -1304,6 +1304,8 @@ ly_path_compile_leafref(const struct ly_ctx *ctx, const struct lysc_node *ctx_no
         const struct lyxp_expr *expr, uint16_t oper, uint16_t target, LY_VALUE_FORMAT format, void *prefix_data,
         struct ly_path **path)
 {
+    assert(ctx_node);
+
     return _ly_path_compile(ctx, ctx_node->module, ctx_node, top_ext, expr, 1, oper, target, 1, format, prefix_data, path);
 }
 
-- 
2.43.0

