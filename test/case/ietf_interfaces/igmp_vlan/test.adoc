=== IGMP VLAN

ifdef::topdoc[:imagesdir: {topdoc}../../test/case/ietf_interfaces/igmp_vlan]

==== Description

Verify VLAN tagged IGMP control traffic and that VLAN separation is respected for multicast.

....
vlan55 10.0.1.1     vlan77 10.0.2.1                  vlan55 10.0.1.2        vlan77 10.0.2.2
          \                /                               \                 /
           .--------------.          VLAN 1,2 T            .---------------.
           | DUT1    link +--------------------------------+ link     DUT2 |
           '-+----------+-'                                '-+-----------+-'
       data1 | 55U  77U | data2                        data1 | 55U   77U | data2
     .-------'          '---.                                |           '-------.
.----+--.                 .-+--------.               .-------+--.             .--+----.
| msend | 10.0.1.11       | mreceive | 10.0.2.11     | mreceive | 10.0.1.22   | msend | 10.0.2.22
'-------'                 '----------'               '----------'             '-------'
....

==== Topology

image::topology.svg[IGMP VLAN topology, align=center, scaledwidth=75%]

==== Sequence

. Set up topology and attach to target DUT
. Configure device
. Start multicast senders on host:data11, group 224.2.2.2, and host:data22, group 224.1.1.1
. Verify group 224.2.2.2 is flooded to host:data21
. Verify group 224.1.1.1 is flooded to host:data12
. Verify group 224.2.2.2 on host:data11, 224.1.1.1 on host:data21, 224.2.2.2 on host:data12 and 224.1.1.1 on host:data22 is not received
. Join multicast group 224.2.2.2 on host:data21
. Verify group 224.2.2.2 on host:data11, 224.1.1.1 on host:data21, 224.2.2.2 on host:data12 and 224.1.1.1 on host:data22 is not received
. Verify group 224.2.2.2 is forwarded to host:data21
. Verify group 224.1.1.1 is forwarded to host:data12


