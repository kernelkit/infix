#include <arm64/freescale/imx8mp-evk.dts>
#include <dt-bindings/usb/pd.h>
#include <dt-bindings/gpio/gpio.h>

&usb3_phy0 {
	status = "okay";
};

&iomuxc {
	pinctrl_typec_mux: typec1muxgrp {
		fsl,pins = <
			MX8MP_IOMUXC_SAI1_MCLK__GPIO4_IO20	0x16
		>;
	};
	pinctrl_typec: typec1grp {
		fsl,pins = <
			MX8MP_IOMUXC_SAI1_TXD7__GPIO4_IO19	0x1c4
		>;
	};
};

&i2c2 {
	ptn5110: tcpc@50 {
		compatible = "nxp,ptn5110";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_typec>;
		reg = <0x50>;
		interrupt-parent = <&gpio4>;
		interrupts = <19 8>;
		status = "disabled";
		port {
			typec_dr_sw: endpoint {
				remote-endpoint = <&usb3_drd_sw>;
			};
		};

		usb_con: connector {
			compatible = "usb-c-connector";
			label = "USB-C";
			power-role = "dual";
			data-role = "dual";
			try-power-role = "sink";
			source-pdos = <PDO_FIXED(5000, 3000, PDO_FIXED_USB_COMM)>;
			sink-pdos = <PDO_FIXED(5000, 3000, PDO_FIXED_USB_COMM)
					PDO_VAR(5000, 20000, 3000)>;
			op-sink-microwatt = <15000000>;
			self-powered;

			ports {
				#address-cells = <1>;
				#size-cells = <0>;

				port@1 {
					reg = <1>;
					typec_con_ss: endpoint {
						remote-endpoint = <&usb3_data_ss>;
					};
				};
			};
		};
	};

	it6263: hdmi@4c {
		compatible = "ite,it6263";
		reg = <0x4c>;
		data-mapping = "jeida-24";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_lvds_en>;
		reset-gpios = <&gpio1 10 GPIO_ACTIVE_LOW>;
		ivdd-supply = <&reg_buck5>;
		ovdd-supply = <&reg_vext_3v3>;
		txavcc18-supply = <&reg_buck5>;
		txavcc33-supply = <&reg_vext_3v3>;
		pvcc1-supply = <&reg_buck5>;
		pvcc2-supply = <&reg_buck5>;
		avcc-supply = <&reg_vext_3v3>;
		anvdd-supply = <&reg_buck5>;
		apvdd-supply = <&reg_buck5>;
		status = "okay";
		ports {
			#address-cells = <1>;
			#size-cells = <0>;
			status = "okay";
			port@0 {
				reg = <0>;
				status = "okay";
				it6263_in: endpoint {
					remote-endpoint = <&ldb_lvds_ch0>;
				};

			};

			port@2 {
				reg = <2>;
				status = "okay";
				it6263_out: endpoint {
					remote-endpoint = <&lvds2hdmi_connector_in>;
				};
			};

		};

	};

};

&lvds_bridge {
	status = "okay";
	ports {
	        port@1 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <1>;
			status = "okay";
			ldb_lvds_ch0: endpoint {
				remote-endpoint = <&it6263_in>;
			};
		};
		port@2 {
			status = "disabled";
		};
	};
};

&usb3_phy0 {
	fsl,phy-tx-vref-tune = <0xe>;
	fsl,phy-tx-preemp-amp-tune = <3>;
	fsl,phy-tx-vboost-level = <5>;
	fsl,phy-comp-dis-tune = <7>;
	fsl,pcs-tx-deemph-3p5db = <0x21>;
	fsl,phy-pcs-tx-swing-full = <0x7f>;
	status = "okay";
};

&usb3_0 {
	status = "okay";
};

&usb_dwc3_0 {
	dr_mode = "otg";
	hnp-disable;
	srp-disable;
	adp-disable;
	usb-role-switch;
	role-switch-default-mode = "none";
	snps,dis-u1-entry-quirk;
	snps,dis-u2-entry-quirk;
	status = "okay";

	port {
		usb3_drd_sw: endpoint {
			remote-endpoint = <&typec_dr_sw>;
		};
	};
};

&lcdif1 {
	status = "disabled";
};
&lcdif2 {
	status = "okay";
};
&lcdif3 {
	status = "disabled";
};
&micfil  {
	status = "disabled";
};

&pcie  {
	status = "disabled";
};
&pcie_phy {
	status = "disabled";
};
&sai2  {
	status = "disabled";
};
&sai3  {
	status = "disabled";
};

/ {
	gpio-sbu-mux {
		compatible = "gpio-sbu-mux";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_typec_mux>;
		switch-gpios = <&gpio4 20 GPIO_ACTIVE_LOW>;
		orientation-switch;

		port {
			usb3_data_ss: endpoint {
				remote-endpoint = <&typec_con_ss>;
			};
		};
	};

        lvds-hdmi-connector {
                compatible = "hdmi-connector";
                label = "J2";
                type = "a";
		status = "okay";

                port {
                        lvds2hdmi_connector_in: endpoint {
                                remote-endpoint = <&it6263_out>;
                        };
                };
        };

	chosen {
		infix {
			factory-password-hash = "$5$mI/zpOAqZYKLC2WU$i7iPzZiIjOjrBF3NyftS9CCq8dfYwHwrmUK097Jca9A";
		};
	};
};
