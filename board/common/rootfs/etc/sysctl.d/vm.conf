# Memory and OOM tuning for embedded network devices
# Optimized for systems with 512MB-4GB RAM
# Target: Fast and deterministic OOM behavior

# OOM Behavior
# Panic on OOM for fast system reset and recovery
vm.panic_on_oom=1

# Dirty Page Writeback
# Limit dirty pages to 10% of RAM before blocking writers
# Start background writeback at 5% to prevent accumulation
vm.dirty_ratio=10
vm.dirty_background_ratio=5

# Writeback Timing
# Expire dirty pages after 10 seconds (1000 centiseconds)
# Ensures quick flushing on limited-memory systems
vm.dirty_expire_centisecs=1000

# Memory Watermarks
# Increase distance between low/high watermarks for earlier reclaim
# Maintains larger free memory buffer proactively (default: 10)
vm.watermark_scale_factor=150
